<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>新api流媒体</title>
	<meta name="keywords" content="">
	<meta name="description" content="">

	<link rel="stylesheet" href="../../css/common.css">
	<script src="../../js/myGetUserMedia.js" charset="utf-8"></script>

	<style>
	#shift{position:fixed; right:1em; bottom:1em;}
	</style>
</head>
<body>
	<video id="video" autoplay="" playsinline muted></video>
	<input id="shift" type="button" value="切换"/>

	<script type="text/javascript">
	var front = false,
		obj = {
			get constraints() {
				return {
					el: '#video',
					audio: true,
					video: {
						width: 1280,
						height: 720 ,
						facingMode: (front ? "user" : "environment")
					}
				}
			},

			get front() {
				return front;
			},
			set front(val) {
				front =  val;
				new myGetUserMedia(obj.constraints);
			}
		};

	new myGetUserMedia(obj.constraints);

	document.querySelector('#shift').addEventListener('click', function() {
		obj.front = !obj.front;
	});
	</script>
</body>
</html>
