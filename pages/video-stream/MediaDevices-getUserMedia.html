<!doctype html>
<html>
<head>
	<meta charset="utf-8">
	<title>新api流媒体</title>
	<meta name="keywords" content="">
	<meta name="description" content="">
	<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no">

	<link rel="stylesheet" href="../../css/common.css">
	<script src="../../js/myGetUserMedia.js" charset="utf-8"></script>

	<style>
	.btns-con{position:fixed; right:1em; bottom:1em;}
	</style>
</head>
<body>
	<video id="video" autoplay="" playsinline muted></video>
	<div class="btns-con">
		<input id="shift" type="button" value="切换"/>
		<input id="play" type="button" value="开始 >"/>
		<input id="stop" type="button" value="停止 ||"/>
	</div>

	<script type="text/javascript">
	var front = false,
		media,
		obj = {
			get constraints() {
				return {
					el: '#video',
					audio: true,
					video: {
						width: 1280,
						height: 720 ,
						facingMode: (front ? "user" : "environment")
					}
				}
			},

			get front() {
				return front;
			},
			set front(val) {
				front =  val;

				media.stop();
				media.update(obj.constraints);
				media.play();
			}
		};

	media = new myGetUserMedia(obj.constraints);

	document.querySelector('#shift').addEventListener('click', function() {
		obj.front = !obj.front;
	});
	document.querySelector('#play').addEventListener('click', function() {
		media.play();
	});
	document.querySelector('#stop').addEventListener('click', function() {
		media.stop();
	});
	</script>
</body>
</html>
